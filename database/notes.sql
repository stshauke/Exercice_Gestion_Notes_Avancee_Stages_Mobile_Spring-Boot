--
-- PostgreSQL database dump
--

\restrict KGq6RybCAWZScSqaOpY2EjMYIvfnAaPO8V5ZBn8vBbccjtMdbzqgfrTkssPNudR

-- Dumped from database version 16.10
-- Dumped by pg_dump version 17.6

-- Started on 2025-09-14 20:12:12

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET transaction_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 224 (class 1259 OID 16432)
-- Name: note_tags; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.note_tags (
    id bigint NOT NULL,
    note_id bigint NOT NULL,
    tag_id bigint NOT NULL
);


ALTER TABLE public.note_tags OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 16431)
-- Name: note_tags_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.note_tags_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.note_tags_id_seq OWNER TO postgres;

--
-- TOC entry 3511 (class 0 OID 0)
-- Dependencies: 223
-- Name: note_tags_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.note_tags_id_seq OWNED BY public.note_tags.id;


--
-- TOC entry 216 (class 1259 OID 16390)
-- Name: notes; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.notes (
    id bigint NOT NULL,
    content_md text NOT NULL,
    created_at timestamp(6) with time zone NOT NULL,
    owner_email character varying(255),
    title character varying(255) NOT NULL,
    updated_at timestamp(6) with time zone NOT NULL,
    owner_id bigint,
    visibility character varying(20) DEFAULT 'PRIVATE'::character varying NOT NULL
);


ALTER TABLE public.notes OWNER TO postgres;

--
-- TOC entry 215 (class 1259 OID 16389)
-- Name: notes_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.notes ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.notes_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 220 (class 1259 OID 16409)
-- Name: public_links; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.public_links (
    id bigint NOT NULL,
    note_id bigint NOT NULL,
    url_token character varying(64) NOT NULL,
    expires_at timestamp with time zone
);


ALTER TABLE public.public_links OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 16408)
-- Name: public_links_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.public_links_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.public_links_id_seq OWNER TO postgres;

--
-- TOC entry 3512 (class 0 OID 0)
-- Dependencies: 219
-- Name: public_links_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.public_links_id_seq OWNED BY public.public_links.id;


--
-- TOC entry 230 (class 1259 OID 16546)
-- Name: public_shares; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.public_shares (
    id bigint NOT NULL,
    note_id bigint NOT NULL,
    url_token character varying(255) NOT NULL,
    created_at timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.public_shares OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 16545)
-- Name: public_shares_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.public_shares_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.public_shares_id_seq OWNER TO postgres;

--
-- TOC entry 3513 (class 0 OID 0)
-- Dependencies: 229
-- Name: public_shares_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.public_shares_id_seq OWNED BY public.public_shares.id;


--
-- TOC entry 228 (class 1259 OID 16471)
-- Name: share; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.share (
    id bigint NOT NULL,
    permission character varying(255),
    note_id bigint NOT NULL,
    user_id bigint NOT NULL,
    created_at timestamp(6) with time zone NOT NULL,
    CONSTRAINT share_permission_check CHECK (((permission)::text = ANY ((ARRAY['READ'::character varying, 'WRITE'::character varying])::text[])))
);


ALTER TABLE public.share OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 16470)
-- Name: share_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.share ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.share_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 226 (class 1259 OID 16451)
-- Name: shares; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.shares (
    id bigint NOT NULL,
    note_id bigint NOT NULL,
    shared_with_user_id bigint NOT NULL,
    permission character varying(20) DEFAULT 'READ'::character varying NOT NULL,
    CONSTRAINT chk_permission CHECK (((permission)::text = 'READ'::text))
);


ALTER TABLE public.shares OWNER TO postgres;

--
-- TOC entry 225 (class 1259 OID 16450)
-- Name: shares_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.shares_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.shares_id_seq OWNER TO postgres;

--
-- TOC entry 3514 (class 0 OID 0)
-- Dependencies: 225
-- Name: shares_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.shares_id_seq OWNED BY public.shares.id;


--
-- TOC entry 222 (class 1259 OID 16423)
-- Name: tags; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tags (
    id bigint NOT NULL,
    label character varying(100) NOT NULL
);


ALTER TABLE public.tags OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16422)
-- Name: tags_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.tags_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER SEQUENCE public.tags_id_seq OWNER TO postgres;

--
-- TOC entry 3515 (class 0 OID 0)
-- Dependencies: 221
-- Name: tags_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE public.tags_id_seq OWNED BY public.tags.id;


--
-- TOC entry 218 (class 1259 OID 16398)
-- Name: users; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.users (
    id bigint NOT NULL,
    email character varying(255) NOT NULL,
    password_hash character varying(255) NOT NULL,
    role character varying(255),
    created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
    CONSTRAINT check_role CHECK (((role)::text = ANY (ARRAY[('USER'::character varying)::text, ('ADMIN'::character varying)::text]))),
    CONSTRAINT users_role_check CHECK (((role)::text = ANY (ARRAY[('USER'::character varying)::text, ('ADMIN'::character varying)::text])))
);


ALTER TABLE public.users OWNER TO postgres;

--
-- TOC entry 217 (class 1259 OID 16397)
-- Name: users_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.users ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.users_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 3303 (class 2604 OID 16435)
-- Name: note_tags id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.note_tags ALTER COLUMN id SET DEFAULT nextval('public.note_tags_id_seq'::regclass);


--
-- TOC entry 3301 (class 2604 OID 16412)
-- Name: public_links id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.public_links ALTER COLUMN id SET DEFAULT nextval('public.public_links_id_seq'::regclass);


--
-- TOC entry 3306 (class 2604 OID 16549)
-- Name: public_shares id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.public_shares ALTER COLUMN id SET DEFAULT nextval('public.public_shares_id_seq'::regclass);


--
-- TOC entry 3304 (class 2604 OID 16454)
-- Name: shares id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.shares ALTER COLUMN id SET DEFAULT nextval('public.shares_id_seq'::regclass);


--
-- TOC entry 3302 (class 2604 OID 16426)
-- Name: tags id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tags ALTER COLUMN id SET DEFAULT nextval('public.tags_id_seq'::regclass);


--
-- TOC entry 3499 (class 0 OID 16432)
-- Dependencies: 224
-- Data for Name: note_tags; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.note_tags (id, note_id, tag_id) FROM stdin;
\.


--
-- TOC entry 3491 (class 0 OID 16390)
-- Dependencies: 216
-- Data for Name: notes; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.notes (id, content_md, created_at, owner_email, title, updated_at, owner_id, visibility) FROM stdin;
12	Préparer la présentation PowerPoint, vérifier les chiffres du budget, envoyer l’invitation à l’équipe.	2025-09-09 13:44:17.316166+00	test@example.com	Réunion projet lundi	2025-09-09 13:44:17.316166+00	1	PRIVATE
13	Lait, pain complet, pommes, pâtes, sauce tomate, fromage râpé, café.	2025-09-09 13:45:10.33497+00	test@example.com	Liste de courses	2025-09-09 13:45:10.33497+00	1	PRIVATE
14	Écrire un article sur “10 astuces pour être productif en télétravail”.	2025-09-09 13:45:36.923929+00	test@example.com	Idée d’article de blog	2025-09-09 13:45:36.923929+00	1	PRIVATE
15	Appeler le médecin\nPayer la facture d’électricité\nRéserver le billet de train	2025-09-09 13:46:20.959092+00	test@example.com	To-do perso	2025-09-09 13:46:20.959092+00	1	PRIVATE
16	“Le succès, c’est tomber sept fois et se relever huit.” – Proverbe japonais	2025-09-09 13:47:02.871893+00	test@example.com	Citation inspirante	2025-09-09 13:47:02.871893+00	1	PRIVATE
17	Lire un livre\nFaire du sport 3x/semaine\nApprendre les bases de Docker	2025-09-09 13:47:38.653686+00	test@example.com	Objectifs du mois	2025-09-09 13:47:38.653686+00	1	PRIVATE
18	Pour le projet Spring Boot → tester les endpoints avec Postman, vérifier CORS activé, documenter l’API.	2025-09-09 13:48:39.119461+00	test@example.com	Notes techniques	2025-09-09 13:48:39.119461+00	1	PRIVATE
31	contenu	2025-09-12 20:48:22.109603+00	\N	Note pour utilisateur 3	2025-09-12 20:48:22.109603+00	3	PRIVATE
32	note a partager uniquement ave l'utilisateur 1 test@example.com	2025-09-13 11:16:17.968398+00	\N	note a partager uniquement 1	2025-09-13 11:16:17.968398+00	3	PRIVATE
\.


--
-- TOC entry 3495 (class 0 OID 16409)
-- Dependencies: 220
-- Data for Name: public_links; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.public_links (id, note_id, url_token, expires_at) FROM stdin;
\.


--
-- TOC entry 3505 (class 0 OID 16546)
-- Dependencies: 230
-- Data for Name: public_shares; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.public_shares (id, note_id, url_token, created_at) FROM stdin;
1	31	826d7619-b7fe-4f29-83c9-2ff725e9446d	2025-09-13 08:07:00.678024
2	18	ea452e97-6afe-45cb-9785-64962af372dd	2025-09-13 08:08:57.947722
3	17	9f7ce528-305b-4058-93b2-b375c5ee9449	2025-09-13 08:09:09.719657
4	18	e0486551-c88f-4666-998b-c334d19606f8	2025-09-13 08:15:45.917018
5	31	f0564dbb-91dd-424b-88bc-d1bb7e59a10b	2025-09-13 08:59:14.331578
6	18	26732751-bc4f-4850-81f8-66dbf0732c07	2025-09-13 09:00:16.081355
7	12	a5da3dde-acc8-4f94-93c4-c7f5cae41141	2025-09-13 11:18:52.553682
\.


--
-- TOC entry 3503 (class 0 OID 16471)
-- Dependencies: 228
-- Data for Name: share; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.share (id, permission, note_id, user_id, created_at) FROM stdin;
1	READ	32	1	2025-09-13 11:16:29.935717+00
2	READ	13	3	2025-09-13 11:19:43.773625+00
\.


--
-- TOC entry 3501 (class 0 OID 16451)
-- Dependencies: 226
-- Data for Name: shares; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.shares (id, note_id, shared_with_user_id, permission) FROM stdin;
\.


--
-- TOC entry 3497 (class 0 OID 16423)
-- Dependencies: 222
-- Data for Name: tags; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tags (id, label) FROM stdin;
\.


--
-- TOC entry 3493 (class 0 OID 16398)
-- Dependencies: 218
-- Data for Name: users; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.users (id, email, password_hash, role, created_at) FROM stdin;
1	test@example.com	$2a$10$B0DnBCXXYxSSBdUoI7zRauWYCrBn/VSs6vJnarPTeKhMIyBjDtML.	USER	2025-09-10 20:53:02.592613
2	test1@example.com	$2a$10$B0DnBCXXYxSSBdUoI7zRauWYCrBn/VSs6vJnarPTeKhMIyBjDtML.	USER	2025-09-10 20:53:02.592613
3	test3@example.com	$2a$10$wCNM4.Eg1LQwwa2xEmBw7.XcjInWs9NG8thYh.5nGp3uljqC/b23u	USER	2025-09-11 14:40:19.55813
4	test4@example.com	$2a$10$aK3gg.nOjKBcJ9yqBDLTX.svT3FYj1jIUx7DIIKnkbBdmtgOdoWcC	USER	2025-09-11 15:01:07.376852
\.


--
-- TOC entry 3516 (class 0 OID 0)
-- Dependencies: 223
-- Name: note_tags_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.note_tags_id_seq', 1, false);


--
-- TOC entry 3517 (class 0 OID 0)
-- Dependencies: 215
-- Name: notes_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.notes_id_seq', 32, true);


--
-- TOC entry 3518 (class 0 OID 0)
-- Dependencies: 219
-- Name: public_links_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.public_links_id_seq', 1, false);


--
-- TOC entry 3519 (class 0 OID 0)
-- Dependencies: 229
-- Name: public_shares_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.public_shares_id_seq', 7, true);


--
-- TOC entry 3520 (class 0 OID 0)
-- Dependencies: 227
-- Name: share_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.share_id_seq', 2, true);


--
-- TOC entry 3521 (class 0 OID 0)
-- Dependencies: 225
-- Name: shares_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.shares_id_seq', 1, false);


--
-- TOC entry 3522 (class 0 OID 0)
-- Dependencies: 221
-- Name: tags_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.tags_id_seq', 1, false);


--
-- TOC entry 3523 (class 0 OID 0)
-- Dependencies: 217
-- Name: users_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.users_id_seq', 4, true);


--
-- TOC entry 3327 (class 2606 OID 16439)
-- Name: note_tags note_tags_note_id_tag_id_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.note_tags
    ADD CONSTRAINT note_tags_note_id_tag_id_key UNIQUE (note_id, tag_id);


--
-- TOC entry 3329 (class 2606 OID 16437)
-- Name: note_tags note_tags_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.note_tags
    ADD CONSTRAINT note_tags_pkey PRIMARY KEY (id);


--
-- TOC entry 3313 (class 2606 OID 16396)
-- Name: notes notes_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.notes
    ADD CONSTRAINT notes_pkey PRIMARY KEY (id);


--
-- TOC entry 3319 (class 2606 OID 16414)
-- Name: public_links public_links_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.public_links
    ADD CONSTRAINT public_links_pkey PRIMARY KEY (id);


--
-- TOC entry 3321 (class 2606 OID 16416)
-- Name: public_links public_links_url_token_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.public_links
    ADD CONSTRAINT public_links_url_token_key UNIQUE (url_token);


--
-- TOC entry 3335 (class 2606 OID 16552)
-- Name: public_shares public_shares_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.public_shares
    ADD CONSTRAINT public_shares_pkey PRIMARY KEY (id);


--
-- TOC entry 3337 (class 2606 OID 16554)
-- Name: public_shares public_shares_url_token_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.public_shares
    ADD CONSTRAINT public_shares_url_token_key UNIQUE (url_token);


--
-- TOC entry 3333 (class 2606 OID 16476)
-- Name: share share_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.share
    ADD CONSTRAINT share_pkey PRIMARY KEY (id);


--
-- TOC entry 3331 (class 2606 OID 16458)
-- Name: shares shares_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.shares
    ADD CONSTRAINT shares_pkey PRIMARY KEY (id);


--
-- TOC entry 3323 (class 2606 OID 16430)
-- Name: tags tags_label_key; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tags
    ADD CONSTRAINT tags_label_key UNIQUE (label);


--
-- TOC entry 3325 (class 2606 OID 16428)
-- Name: tags tags_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tags
    ADD CONSTRAINT tags_pkey PRIMARY KEY (id);


--
-- TOC entry 3315 (class 2606 OID 16407)
-- Name: users uk6dotkott2kjsp8vw4d0m25fb7; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT uk6dotkott2kjsp8vw4d0m25fb7 UNIQUE (email);


--
-- TOC entry 3317 (class 2606 OID 16405)
-- Name: users users_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.users
    ADD CONSTRAINT users_pkey PRIMARY KEY (id);


--
-- TOC entry 3344 (class 2606 OID 16477)
-- Name: share fkdw45str73qrq9w2k6etxf10lh; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.share
    ADD CONSTRAINT fkdw45str73qrq9w2k6etxf10lh FOREIGN KEY (note_id) REFERENCES public.notes(id);


--
-- TOC entry 3345 (class 2606 OID 16482)
-- Name: share fkqpl1v3hvb4io91a90ltbfhkwf; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.share
    ADD CONSTRAINT fkqpl1v3hvb4io91a90ltbfhkwf FOREIGN KEY (user_id) REFERENCES public.users(id);


--
-- TOC entry 3340 (class 2606 OID 16440)
-- Name: note_tags note_tags_note_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.note_tags
    ADD CONSTRAINT note_tags_note_id_fkey FOREIGN KEY (note_id) REFERENCES public.notes(id) ON DELETE CASCADE;


--
-- TOC entry 3341 (class 2606 OID 16445)
-- Name: note_tags note_tags_tag_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.note_tags
    ADD CONSTRAINT note_tags_tag_id_fkey FOREIGN KEY (tag_id) REFERENCES public.tags(id) ON DELETE CASCADE;


--
-- TOC entry 3338 (class 2606 OID 16535)
-- Name: notes notes_owner_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.notes
    ADD CONSTRAINT notes_owner_id_fkey FOREIGN KEY (owner_id) REFERENCES public.users(id);


--
-- TOC entry 3339 (class 2606 OID 16417)
-- Name: public_links public_links_note_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.public_links
    ADD CONSTRAINT public_links_note_id_fkey FOREIGN KEY (note_id) REFERENCES public.notes(id) ON DELETE CASCADE;


--
-- TOC entry 3346 (class 2606 OID 16555)
-- Name: public_shares public_shares_note_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.public_shares
    ADD CONSTRAINT public_shares_note_id_fkey FOREIGN KEY (note_id) REFERENCES public.notes(id) ON DELETE CASCADE;


--
-- TOC entry 3342 (class 2606 OID 16459)
-- Name: shares shares_note_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.shares
    ADD CONSTRAINT shares_note_id_fkey FOREIGN KEY (note_id) REFERENCES public.notes(id) ON DELETE CASCADE;


--
-- TOC entry 3343 (class 2606 OID 16464)
-- Name: shares shares_shared_with_user_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.shares
    ADD CONSTRAINT shares_shared_with_user_id_fkey FOREIGN KEY (shared_with_user_id) REFERENCES public.users(id) ON DELETE CASCADE;


-- Completed on 2025-09-14 20:12:13

--
-- PostgreSQL database dump complete
--

\unrestrict KGq6RybCAWZScSqaOpY2EjMYIvfnAaPO8V5ZBn8vBbccjtMdbzqgfrTkssPNudR

